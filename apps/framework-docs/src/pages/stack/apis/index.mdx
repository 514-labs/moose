---
title: Moose APIs
description: Create type-safe ingestion and consumption APIs for data access and integration
---

import { Callout, LanguageSwitcher, BulletPointsCard, CheckmarkBullets, TypeScript, Python, CTACards, CTACard } from "@/components";
import { Tabs } from "nextra/components";

# APIs
<LanguageSwitcher />

## Overview

The APIs capability provides standalone HTTP endpoints for data ingestion and consumption. You can use this capability independently to create type-safe APIs without requiring other MooseStack components like databases or streams.

<BulletPointsCard
  title="Working with APIs"
  bullets={[
    {
      title: "Define your API schema",
      description: "Create type definitions for request parameters and response data"
    },
    {
      title: "Write route handlers",
      description: "Implement business logic with type-safe request/response handling"
    },
    {
      title: "Automatic validation",
      description: "Get runtime validation, type conversion, and OpenAPI documentation"
    },
    {
      title: "Standalone deployment",
      description: "Deploy APIs independently of other MooseStack capabilities"
    }
  ]}
/>

## Core Capabilities

<CTACards>
<CTACard
  title="Ingest Data"
  description="Create HTTP POST endpoints for data ingestion with validation and routing"
  ctaLink="/moosestack/apis/ingest-data"
  ctaLabel="Learn More →"
  badge={{ variant: "moose", text: "Ingestion" }}
/>
<CTACard
  title="Egress Data"
  description="Create HTTP GET endpoints for data consumption with query parameters"
  ctaLink="/moosestack/apis/egress-data"
  ctaLabel="Learn More →"
  badge={{ variant: "moose", text: "Consumption" }}
/>
</CTACards>

## Standalone Usage

The APIs capability is designed to work independently. You can use it without requiring other MooseStack components:

<BulletPointsCard
  title="Independent API Management"
  bullets={[
    {
      title: "No database required",
      description: "Create APIs that connect to external data sources or services"
    },
    {
      title: "Flexible routing",
      description: "Route requests to any destination - databases, streams, or external services"
    },
    {
      title: "Type-safe validation",
      description: "Get automatic request/response validation without additional setup"
    },
    {
      title: "OpenAPI generation",
      description: "Automatically generate API documentation and client SDKs"
    }
  ]}
/>

## Integration with Other Capabilities

While the APIs capability works standalone, it seamlessly integrates with other MooseStack capabilities:

- **OLAP Database**: Use APIs to ingest data into tables or query data from tables
- **Streaming**: Route API requests to streams for real-time processing
- **Workflows**: Trigger workflows from API endpoints
- **Runtime**: Deploy and manage API infrastructure

## Basic Examples

### Ingestion API

<TypeScript>
```ts filename="IngestApi.ts" copy
import { IngestApi } from "@514labs/moose-lib";

interface UserEvent {
  id: string;
  userId: string;
  timestamp: Date;
  eventType: string;
}

// Create a standalone ingestion API
const userEventsApi = new IngestApi<UserEvent>("user-events", {
  // Route to external service or custom handler
  destination: (event) => {
    // Custom logic here
    console.log("Processing event:", event);
  }
});
```
</TypeScript>

<Python>
```py filename="IngestApi.py" copy
from moose_lib import IngestApi
from pydantic import BaseModel
from datetime import datetime

class UserEvent(BaseModel):
    id: str
    user_id: str
    timestamp: datetime
    event_type: str

# Create a standalone ingestion API
def process_event(event: UserEvent):
    # Custom logic here
    print(f"Processing event: {event}")

user_events_api = IngestApi[UserEvent]("user-events", process_event)
```
</Python>

### Consumption API

<TypeScript>
```ts filename="ConsumptionApi.ts" copy
import { ConsumptionApi } from "@514labs/moose-lib";

interface QueryParams {
  userId: string;
  limit: number;
}

interface UserData {
  id: string;
  name: string;
  email: string;
}

// Create a standalone consumption API
const userDataApi = new ConsumptionApi<QueryParams, UserData[]>("user-data", 
  async ({ userId, limit }, { client, sql }) => {
    // Query external service or custom logic
    return [
      { id: userId, name: "John Doe", email: "john@example.com" }
    ];
  }
);
```
</TypeScript>

<Python>
```py filename="ConsumptionApi.py" copy
from moose_lib import ConsumptionApi, MooseClient
from pydantic import BaseModel

class QueryParams(BaseModel):
    user_id: str
    limit: int

class UserData(BaseModel):
    id: str
    name: str
    email: str

def get_user_data(client: MooseClient, params: QueryParams) -> list[UserData]:
    # Query external service or custom logic
    return [
        UserData(id=params.user_id, name="John Doe", email="john@example.com")
    ]

user_data_api = ConsumptionApi[QueryParams, UserData]("user-data", get_user_data)
```
</Python>

<Callout type="info">
**Getting Started**: Begin with [Ingest Data](/moosestack/apis/ingest-data) to understand how to create your first API endpoint for data ingestion.
</Callout>
