# Getting Started with DMv2

Learn how to set up and start using Moose's Data Modeling v2 (DMv2) system.

## Quick Start (2 minutes)

```toml
# 1. Enable DMv2 in moose.config.toml
[features]
data_models_v2 = true
```

```typescript
// 2. Create your first pipeline in app/datamodels/record.ts
import { IngestPipeline, Key } from '@514labs/moose-lib';

// Define your data structure
interface Record {
  id: Key<string>;
  timestamp: Date;
  value: number;
}

// Create a complete pipeline with one line
export const recordPipeline = new IngestPipeline<Record>("records", {
  table: true,    // Create storage table
  stream: true,   // Enable processing
  ingest: true    // Create HTTP endpoint
});
```

```bash
# 3. Start the development server
moose dev
```

That's it! Your pipeline is ready. Data can be ingested via HTTP, processed in the stream, and stored in the table.

## Core Concepts

### Components

DMv2 is built around four main components:

1. **`IngestPipeline`**
   - All-in-one solution for most use cases
   - Combines storage, processing, and ingestion
   - Recommended starting point

2. **`OlapTable`**
   - Type-safe data storage in ClickHouse
   - Optimized for analytical queries
   - Configurable indexing and deduplication

3. **`Stream`**
   - Real-time data processing
   - Transform and filter data
   - Act as a buffer between the ingestion and storage components

4. **`IngestApi`**
   - HTTP endpoints for data ingestion
   - Automatic schema validation
   - Type-safe request handling

### Type Safety

Moose provides end-to-end type safety. Based on your defined schema you provide to the infrastructure object types, Moose will ensure:
- For `IngestApi` -> data is validated at the ingestion point
- For `OlapTable` -> data is stored in the correct format in ClickHouse
- For `Stream` -> data transformations are type safe and checked at compile time

## Basic Example

Here's a complete example of a user activity tracking system:

```typescript filename="app/datamodels/record.ts"
import { IngestPipeline, Key } from '@514labs/moose-lib';

// Define the data structure
interface Record {
  id: Key<string>;
  field1: string;
  field2: number;
  timestamp: Date;
  metadata?: {
    attr1: string;
    attr2?: number;
  };
}

// Create the pipeline
export const recordPipeline = new IngestPipeline<Record>("records", {
  table: true, // Create a table in ClickHouse
  stream: true, // Enable stream processing
  ingest: true // Create an HTTP endpoint for ingestion
});
```

## Next Steps

- Learn about [Components](/v2/data-modeling/components) in detail
- Understand [Schema Design](/v2/data-modeling/schemas)
- Explore [Stream Processing](/v2/data-modeling/streams)
- Read our [Best Practices](/v2/data-modeling/best-practices)

Need help? Join our [Slack community](https://join.slack.com/t/moose-community) for support. 