import {
  CTACard,
  CTACards,
  ZoomImg,
  ChipButton,
  Columns,
  Column,
  FeatureCard,
  FeatureGrid,
} from "@/components";
import { Button } from "@/components/ui";
import { SmallTextEmbed } from "@/components/typography";
import { FolderPlus, Scroll, Code, Terminal, Database, Zap, FileCode, Clock, Users, GitBranch } from "lucide-react";
import Link from "next/link";
import { Tabs, Tab } from "nextra/components";

# Moose

>Data engineering framework for modern software developers

Moose is an open-source framework for building data-intensive applications using pure TypeScript or Python without the complexity of a traditional data stack.

<div className="flex flex-col md:flex-row gap-4 my-8">
  <Link href="/moose/quickstart">
    <Button variant="default">Quick Start →</Button>
  </Link>
  <Link href="/templates">
    <Button variant="secondary">
      See Examples
    </Button>
  </Link>
  <Link href="https://github.com/514-labs/moose">
    <Button variant="secondary">
      <GitBranch className="mr-2 h-4 w-4" />
      GitHub
    </Button>
  </Link>
</div>

---

## Building with the Data Stack Doesn't Have to Suck

Building software with today's data stack is hard. You usually have to deal with:

- Tool fragmentation: More time spent integrating Kafka, ClickHouse, Postgres, dbt, Airflow, and a dozen other services instead of building your actual application
- Schema drift everywhere: Your TypeScript or Python models, database schemas, API validation, and message formats all diverge over time
- Painful development workflow: No local testing, long deployment cycles, and constant context switching
- SQL-only processing: Having to use SQL for everything when you'd rather use languages you're already comfortable with


### Why Moose Exists (Current State)
What happens when you need to add a simple string field to your data model?

**1. Update your TS/Python Code Model**
```
interface User {
  id: string;
  email: string;
  name: string;
  status: string;  // New field!
}
```

**2. Update your Database Schema**
```sql
-- Create a migration
ALTER TABLE users ADD COLUMN status VARCHAR(50);
```

**3. Update your Kafka Topic**
```json
{
  "type": "object",
  "properties": {
    "id": { "type": "string" },
    "email": { "type": "string" },
    "name": { "type": "string" },
    "status": { "type": "string" }  // New field!
  }
}
```

**4. Update your Runtime Validation**
```ts
function validateUser(user: User) {
  if (!user.status) {
    throw new Error("Status is required");
  }
  if (user.status !== "active" && user.status !== "inactive") {
    throw new Error("Status must be either active or inactive");
  }
  if (user.status === "active" && !user.email) {
    throw new Error("Active users must have an email");
  }
  if (user.status === "inactive" && user.email) {
    throw new Error("Inactive users cannot have an email");
  }
}
```

**5. Update your transformations & queries**
```sql
-- Update your transformations & queries
SELECT id, email, name, status FROM users;
```


> Can you see the problem? This process repeats for **every change**.

You also have to test that everything is working together in a safe, isolated dev environment, which is even more painful with so many moving parts.

### What Moose Does
With Moose, your TypeScript and Python code is the single source of truth for your data models and transformations:

```ts
// Define your model ONCE
import { Key, IngestPipeline } from "@514labs/moose-lib";

interface Order {
  id: Key<string>;
  customerId: string;
  items: {
    productId: string;
    quantity: number;
    price: number;
  }[];
  createdAt: Date;
}

// And use it EVERYWHERE - ONE line to wire everything up
export const orderPipeline = new IngestPipeline<Order>("orders", {
  ingest: true,    // Creates API endpoint with validation
  stream: true,    // Creates properly structured Redpanda topic
  table: true      // Creates ClickHouse database table
});
```
You get end-to-end infrastructure for your data pipeline that is:
- Defined purely in TypeScript or Python code
- Completely type safe and validated
- Boilerplate free
- Able to catch errors at dev time, not at runtime
- Running entirely on your laptop and hot reloaded as you save changes in your editor

No schema management, no manual synchronization, no context switching between your code editor, your database console, your Kafka client, etc.

```txt
❌ “Does my Database table use snake_case or camelCase?” 
❌ “Did I add the new field to both the model AND the table?” 
❌ “Which database field was nullable again?”
```
### Local Dev in Seconds
Moose comes with a pre-configured and fully integrated data stack that runs entirely on your laptop.

Spin up your local data stack in seconds
```bash
moose dev
```

All the infrastructure is automatically spun up on your laptop:
- Analytical database: ClickHouse
- Streaming platform: Redpanda
- Workflow orchestrator: Temporal

```txt
⡏ Starting local infrastructure
  Successfully started containers
     Validated clickhousedb-1 docker container
     Validated redpanda-1 docker container
  Successfully validated red panda cluster
     Validated temporal docker container
  Successfully ran local infrastructure
```
This lets you iterate on your data pipeline quickly and confidently, with the same technologies and logic that will run in production. No need to configure any of the infrastructure yourself.

- Need to add or change a model? Moose hot reloads it to your local infrastructure when you save
- Added a new field? It's instantly available in your API, streams, and database
- Need to test your pipeline? Send a request locally and see the data flow through

```ts filename="HotReload.ts" {11} copy
// Add a field to your model
interface Order {
  id: Key<string>;
  customerId: string;
  items: {
    productId: string;
    quantity: number;
    price: number;
  }[];
  createdAt: Date;
  status: string; // New field
}
```

Hit save and youll see your changes hot reloaded to your local infrastructure:
```txt {3}
⢹ Processing Infrastructure changes from file watcher
             ~ Topic: orders - Version: 0.0 - Retention Period: 604800s - Partition Count: 1
             ~ Table orders with column changes: [Added(Column { name: "status", data_type: String, required: true, unique: false, primary_key: false, default: None })] and order by changes: OrderByChange { before: [], after: [] }
             ~ Topic to Table Sync Process: orders_0_0 -> orders
             ~ API Endpoint: orders - Version: 0.0 - Path: ingest/orders - Method: POST - Format: Some(Json)
```
That's it! No additional steps needed.
- Your API now validates this field
- Your database schema is updated
- Your streams carry the new field


#### Modular and Configurable

Moose is designed to be modular and configurable. You can pick and choose which components you need and configure them to your liking.

While Moose starts with these sane defaults, we're actively adding support for more backends:

- Additional data warehouses like Snowflake, BigQuery, and Databricks
- Alternative streaming platforms like Kafka and Kinesis
- Different orchestration tools

[Let us know](https://calendly.com/d/cmh5-nrj-9nc/talk-to-engineering) if you'd like to see support for specific platforms in your stack.


## Ready to get started?

### Learn the Core Concepts

<FeatureGrid>
  <FeatureCard
    href="/moose/data-modeling"
    icon={<Code className="h-6 w-6 text-moose-purple" />}
    title="Type-Safe Data Models"
    description="Define schemas once in TS/Python that can be used to generate data ingestion, storage, and API infrastructure"
  />
  
  <FeatureCard
    href="/moose/ingestion"
    icon={<Database className="h-6 w-6 text-moose-purple" />}
    title="High-Performance Data Ingestion"
    description="Auto-validated APIs to capture data into OLAP databases with full type safety"
  />
  
  <FeatureCard
    href="/moose/streams"
    icon={<Zap className="h-6 w-6 text-moose-purple" />}
    title="Real-Time Stream Processing"
    description="Transform events in-flight using your preferred language, not just SQL"
  />
  
  <FeatureCard
    href="/moose/materialized-views"
    icon={<Database className="h-6 w-6 text-moose-purple" />}
    title="In-Database Transformations"
    description="Create materialized views and transform data directly in your OLAP database with SQL blocks"
  />
  
  <FeatureCard
    href="/moose/consumption-apis"
    icon={<FileCode className="h-6 w-6 text-moose-purple" />}
    title="Analytics APIs"
    description="Build and expose fully-typed APIs to consume your processed data"
  />
  
  <FeatureCard
    href="/moose/workflows"
    icon={<Clock className="h-6 w-6 text-moose-purple" />}
    title="Workflow Orchestration"
    description="Schedule jobs or trigger on events using simple, language-native workflow definitions"
  />
</FeatureGrid>
---

## What Can You Build with Moose?

Moose is ideal for a wide range of data-intensive applications, from real-time analytics to complex data pipelines:

<div className="my-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  <div className="p-5 border border-border rounded-lg bg-muted/30">
    <p className="font-medium text-primary mb-2">User Facing Analytics</p>
    <p className="text-muted-foreground text-sm">Embed leaderboards, charts, metrics, and other real-time features in your web or mobile apps</p>
  </div>
  <div className="p-5 border border-border rounded-lg bg-muted/30">
    <p className="font-medium text-primary mb-2">BI and Data Warehouses</p>
    <p className="text-muted-foreground text-sm">Collect disparate data sources into an analytical database, produce custom reports, and more</p>
  </div>
  <div className="p-5 border border-border rounded-lg bg-muted/30">
    <p className="font-medium text-primary mb-2">Data Migrations</p>
    <p className="text-muted-foreground text-sm">One-time migration of data from legacy systems to a modern data backend</p>
  </div>
  <div className="p-5 border border-border rounded-lg bg-muted/30">
    <p className="font-medium text-primary mb-2">Event Streaming</p>
    <p className="text-muted-foreground text-sm">Real-time processing of events from Kafka, Redpanda, or other event streaming platforms</p>
  </div>
  <div className="p-5 border border-border rounded-lg bg-muted/30">
    <p className="font-medium text-primary mb-2">ETL Workloads</p>
    <p className="text-muted-foreground text-sm">Repeated batch jobs to collect data from different sources and load them into an analytics environment</p>
  </div>
</div>

---

## Community

<CTACards>
  <CTACard
    title="GitHub"
    description="Star, check out the code, and contribute to Moose on GitHub"
    ctaLink="https://github.com/514-labs/moose"
    ctaLabel="GitHub"
    Icon={GitBranch}
  />
  <CTACard
    title="Talk to the Moose Maintainers"
    description="We're always looking to improve Moose and would love to hear from you!"
    ctaLink="https://cal.com/team/514/talk-to-eng"
    ctaLabel="Talk to the Team"
    Icon={Users}
  />
</CTACards>

