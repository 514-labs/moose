---
title: Production Mode
description: Hardened runtime optimized for performance, reliability, and horizontal scaling
---

import { TypeScript, Python, LanguageSwitcher, Callout } from "@/components";

# Production Mode

<LanguageSwitcher />

Production mode (`moose prod`) is the default mode for running your application in production. 

Moose supports several deployment scenarios (across both containerized and non-containerized environments):

- **Kubernetes Deployment**: Deploy your application to Kubernetes clusters (GKE, EKS, AKS, or on-premises)
- **Standard Server Deployment**: Deploy your application to a server with internet access
- **Containerized Cloud Deployment**: Deploy to cloud services like AWS ECS or Google Cloud Run
- **Offline Server Deployment**: Deploy to an environment without internet access

## Infrastructure Management

The primary difference between `moose dev` and `moose prod` is that `moose prod` requires access to hosted services that are required for your application to run:

- **ClickHouse** (when `olap` feature is enabled)

- **Kafka/Redpanda ** (when `streaming_engine` feature is enabled)

- **Redis** (always required)

- **Temporal** (when `workflows` feature is enabled)

If self-hosting Moose, you can stand up open source versions of these infrastructure services within your environments or opt to use cloud-hosted versions available at:

- [Redis Cloud](https://redis.com/try-free/)
- [ClickHouse Cloud](https://clickhouse.com/cloud)
- [Redpanda Cloud](https://redpanda.com/cloud)
- [Temporal Cloud](https://temporal.io/cloud)

### Environment Configuration
For any type of deployment, you'll need to configure the following:

- Runtime environment variables for logging, telemetry, and application settings
- External service connections (Redis, ClickHouse, Redpanda, Temporal)
- Network settings and security configurations
- Application-specific configurations

```bash
# Logger configuration
MOOSE_LOGGER__LEVEL=Info
MOOSE_LOGGER__STDOUT=true
MOOSE_LOGGER__FORMAT=Json
# Telemetry configuration
MOOSE_TELEMETRY__ENABLED=false
MOOSE_TELEMETRY__EXPORT_METRICS=true
# For debugging
RUST_BACKTRACE=1

# HTTP Server Configuration
export MOOSE_HTTP_SERVER_CONFIG__HOST=0.0.0.0
export MOOSE_HTTP_SERVER_CONFIG__PORT=4000

# Redis Configuration (Required)
export MOOSE_REDIS_CONFIG__URL=redis://user:password@redis.example.com:6379
export MOOSE_REDIS_CONFIG__KEY_PREFIX=moose_production

# ClickHouse Configuration (Optional)
export MOOSE_CLICKHOUSE_CONFIG__DB_NAME=moose_production
export MOOSE_CLICKHOUSE_CONFIG__USER=moose_user
export MOOSE_CLICKHOUSE_CONFIG__PASSWORD=your_clickhouse_password
export MOOSE_CLICKHOUSE_CONFIG__HOST=clickhouse.example.com
export MOOSE_CLICKHOUSE_CONFIG__HOST_PORT=8443
export MOOSE_CLICKHOUSE_CONFIG__USE_SSL=1
export MOOSE_CLICKHOUSE_CONFIG__NATIVE_PORT=9440

# Redpanda Configuration (Optional)
export MOOSE_REDPANDA_CONFIG__BROKER=kafka.example.com:9092
export MOOSE_REDPANDA_CONFIG__NAMESPACE=moose_production
export MOOSE_REDPANDA_CONFIG__MESSAGE_TIMEOUT_MS=10043
export MOOSE_REDPANDA_CONFIG__SASL_USERNAME=redpanda_user
export MOOSE_REDPANDA_CONFIG__SASL_PASSWORD=redpanda_password
export MOOSE_REDPANDA_CONFIG__SASL_MECHANISM=SCRAM-SHA-256
export MOOSE_REDPANDA_CONFIG__SECURITY_PROTOCOL=SASL_SSL
export MOOSE_REDPANDA_CONFIG__REPLICATION_FACTOR=3

# Temporal Configuration (Optional)
export MOOSE_TEMPORAL_CONFIG__CA_CERT=/etc/ssl/certs/ca-certificates.crt
export MOOSE_TEMPORAL_CONFIG__API_KEY=temporal_api_key
export MOOSE_TEMPORAL_CONFIG__TEMPORAL_HOST=your-namespace.tmprl.cloud
```

<Callout type="info" title="Self-Hosting">
When deploying your Moose application, youâ€™ll need to pass these configurations as environment variables. Refer to the deployment guides for your specific platform (Kubernetes, ECS, etc.) for details on how to securely provide these values to your application.
</Callout>

## Migration from Development

### Pre-Production Checklist

**Infrastructure Setup**
1. Provision external ClickHouse, Kafka, and Redis clusters
2. Configure network security groups and firewalls
3. Set up SSL certificates and key management
4. Establish backup and disaster recovery procedures

**Application Preparation**
1. Build your moose application with `moose build`
2. Configure production environment variables
3. Set up monitoring and alerting systems
4. Prepare deployment automation scripts

**Security Configuration**
1. Generate production JWT signing keys
2. Configure RBAC roles and permissions
3. Set up API key management


<Callout type="info" title="Read the Self-Hosting Guide">
For detailed deployment instructions including containerization, Kubernetes deployment, cloud configuration, and monitoring setup, see the [Self-Hosting Deployment Guide](/moose/deploying/self-hosting).
</Callout>
