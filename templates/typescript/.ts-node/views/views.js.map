{"version":3,"file":"views.js","sourceRoot":"","sources":["../../app/views/views.ts"],"names":[],"mappings":";;;;;;AAAA,gDAAuC;AAEvC,gDAAsD;AACtD,2CAA+C;AAQ/C,IAAM,QAAQ,GAAG,oBAAW,CAAC,KAAM,CAAC;AACpC,IAAM,KAAK,GAAG,mCACK,QAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,yCACzC,QAAQ,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,0CAC9B,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,yCACjC,QAAQ,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,4CAChC,QAAQ,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,wCACjC,QAAQ,CAAC,IAAI,uCACI,QAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,UACzD,CAAC;AACS,QAAA,eAAe,GAAG,IAAI,4BAAgB,CAAgB;IAC/D,SAAS,EAAE,eAAe;IAC1B,oBAAoB,EAAE,kBAAkB;IACxC,aAAa,EAAE,CAAC,YAAY,CAAC;IAC7B,eAAe,EAAE,KAAK;CACzB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAEK,IAAI,CAAC,KAAK,CAAC,6sBAA6sB,CAAQ,CAAC,CAAC","sourcesContent":["import ____moose____typia from \"typia\";\nimport typia from \"typia\";\nimport { MaterializedView } from \"@514labs/moose-lib\";\nimport { BarPipeline } from \"../ingest/models\";\ninterface BarAggregated {\n    dayOfMonth: number & typia.tags.Type<\"int64\">;\n    totalRows: number & typia.tags.Type<\"int64\">;\n    rowsWithText: number & typia.tags.Type<\"int64\">;\n    totalTextLength: number & typia.tags.Type<\"int64\">;\n    maxTextLength: number & typia.tags.Type<\"int64\">;\n}\nconst BarTable = BarPipeline.table!;\nconst query = `SELECT\n    toDayOfMonth(${BarTable.columns.utcTimestamp.name}) as dayOfMonth,\n    count(${BarTable.columns.primaryKey.name}) as totalRows,\n    countIf(${BarTable.columns.hasText.name}) as rowsWithText,\n    sum(${BarTable.columns.textLength.name}) as totalTextLength,\n    max(${BarTable.columns.textLength.name}) as maxTextLength\n  FROM ${BarTable.name}\n  GROUP BY toDayOfMonth(${BarTable.columns.utcTimestamp.name})\n  `;\nexport const BarAggregatedMV = new MaterializedView<BarAggregated>({\n    tableName: \"BarAggregated\",\n    materializedViewName: \"BarAggregated_MV\",\n    orderByFields: [\"dayOfMonth\"],\n    selectStatement: query,\n}, ____moose____typia.json.schemas<[\n    BarAggregated\n]>(), JSON.parse(\"[{\\\"name\\\":\\\"dayOfMonth\\\",\\\"data_type\\\":\\\"Int\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"totalRows\\\",\\\"data_type\\\":\\\"Int\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"rowsWithText\\\",\\\"data_type\\\":\\\"Int\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"totalTextLength\\\",\\\"data_type\\\":\\\"Int\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"maxTextLength\\\",\\\"data_type\\\":\\\"Int\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]}]\") as any);\n"]}