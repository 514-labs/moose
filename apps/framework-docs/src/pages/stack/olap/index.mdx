---
title: Moose OLAP
description: Create and manage ClickHouse tables, materialized views, and data migrations
---

import { Callout, BulletPointsCard, CheckmarkBullets, LanguageSwitcher, TypeScript, Python, CTACards, CTACard } from "@/components";
import { Tabs } from "nextra/components";

# OLAP Database
<LanguageSwitcher />

## Overview

The OLAP Database capability provides standalone ClickHouse database management with type-safe schemas. You can use this capability independently to create tables, materialized views, and manage your table schemas without requiring other MooseStack components.


## Enabling OLAP Database

In your `moose.config.toml` file, enable the OLAP Database capability:

```toml
[features]
olap = true
```

## Core Capabilities

- Model tables and views with TypeScript or Python
- Automatic type mapping and support for advanced ClickHouse column types (e.g `JSON`, `LowCardinality`, `Nullable`, etc)
- Create tables and views with one line of code
- In-database transformations/materialized views
- Migrations and schema evolution
- Query with templated SQL strings and type-safe table and column references
- Bulk insertion with failure handling and runtime validation


## Combining with other modules:

Althought designed to work independently, Moose OLAP can be combined with other modules to add additional capabilities surrounding your database:

- Combine with Streaming and APIs to setup streaming ingestion into ClickHouse tables
- Combine with Workflows to build ETL pipelines and data transformations
- Combine with APIs to expose your ClickHouse queries to client applications via REST API

<BulletPointsCard
title="Working with OLAP Database"
bullets={[
  {
    title: "Define your table schema as a data model",
    description: "Create a type definition that describes your table structure"
  },
  {
    title: "Instantiate your table",
    description: "Create a typed table instance from your model with one line of code"
  },
  {
    title: "Configure storage options",
    description: "Optionally specify indexing, ordering, and other optimizations for your query patterns"
  },
  {
    title: "Iterate on your schema",
    description: "Add, edit, or remove fields and tables update automatically"
  }
]}
/>

### Basic Example

<TypeScript>
```ts filename="FirstTable.ts" copy
interface MyFirstTable {
  id: Key<string>;
  name: string;
  age: number;
}

// Create a table named "first_table"
const myTable = new OlapTable<MyFirstTable>("first_table");
```
</TypeScript>

<Python>
```py filename="FirstTable.py" copy
from pydantic import BaseModel
from moose_lib import Key, OlapTable

class MyFirstTable(BaseModel):
    id: Key[str]
    name: str
    age: int

# Create a table named "first_table"
my_table = OlapTable[MyFirstTable]("first_table") 
```
</Python>

<CheckmarkBullets
  title="Benefits:"
  bullets={[
    "Boilerplate CREATE/ALTER TABLE statements handled for you",
    "Automatic type mapping between your code and database types",
    "Built-in validation before storage",
    "Works independently of other MooseStack capabilities"
  ]}
/>

## Core Capabilities

<CTACards>
<CTACard
  title="Create Tables"
  description="Define and create ClickHouse tables with type-safe schemas"
  ctaLink="/moosestack/olap/create-table"
  ctaLabel="Learn More →"
  badge={{ variant: "moose", text: "Tables" }}
/>
<CTACard
  title="Materialized Views"
  description="Pre-compute and store query results for faster analytics"
  ctaLink="/moosestack/olap/create-materialized-view"
  ctaLabel="Learn More →"
  badge={{ variant: "moose", text: "Views" }}
/>
<CTACard
  title="Query Data"
  description="Write type-safe SQL queries with automatic interpolation"
  ctaLink="/moosestack/olap/query-data"
  ctaLabel="Learn More →"
  badge={{ variant: "moose", text: "Queries" }}
/>
<CTACard
  title="Insert Data"
  description="Bulk insert and manage data in your OLAP tables"
  ctaLink="/moosestack/olap/insert-data"
  ctaLabel="Learn More →"
  badge={{ variant: "moose", text: "Data" }}
/>
<CTACard
  title="Schema Migration"
  description="Safely evolve your table schemas over time"
  ctaLink="/moosestack/olap/migrate-schema"
  ctaLabel="Learn More →"
  badge={{ variant: "moose", text: "Migration" }}
/>
</CTACards>

## Standalone Usage

The OLAP Database capability is designed to work independently. You can use it without requiring other MooseStack components:

<BulletPointsCard
  title="Independent Database Management"
  bullets={[
    {
      title: "No dependencies",
      description: "Create and manage tables without requiring APIs, streams, or workflows"
    },
    {
      title: "Direct database access",
      description: "Write directly to tables using bulk operations or external tools"
    },
    {
      title: "Flexible integration",
      description: "Connect to any data source or tool that can write to ClickHouse"
    },
    {
      title: "Gradual adoption",
      description: "Start with just database management, add other capabilities later"
    }
  ]}
/>

## Integration with Other Capabilities

While the OLAP Database capability works standalone, it seamlessly integrates with other MooseStack capabilities:

- **APIs**: Use tables as destinations for ingestion APIs or sources for consumption APIs
- **Streaming**: Connect streams to tables for real-time data processing
- **Workflows**: Use tables in ETL workflows and data transformations
- **Runtime**: Deploy and manage database infrastructure

<Callout type="info">
**Getting Started**: Begin with [Create Tables](/moosestack/olap/create-table) to understand how to define and create your first database table.
</Callout>
