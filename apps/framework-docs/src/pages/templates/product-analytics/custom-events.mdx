# Tracking Custom Events

To start instrumenting your own custom events, follow these two key steps:

1. **Update Moose Project Code:** Modify your Moose project to configure all the necessary infrastructure components for ingesting data for your new custom events.
2. **Instrument Your Application:** Implement tracking in your existing application to send the custom event data to the Moose ingestion infrastructure you just set up.

## Define a New Data Model in your Moose Project

Start by defining a new data model based on your specific requirements. For client-side events, we recommend beginning with the global properties found in the `PageViewRaw` model, such as `eventId`, `timestamp`, `session_id`, `user_agent`, `locale`, `location`, `href`, `pathname`, and `referrer`. From there, you can then add custom properties relevant to the specific events you want to track.

### Example: Button Click Event

For example, if you want to track button click events, you could create a `ButtonClickEvent` data model with additional properties like `cta_copy` (the text on the button clicked) and `cta_target` (the target link redirected by the button). This approach ensures you capture both the context (via common web analytics data fields) and the specific user interaction details for the event.

```tsx filename="moose/app/datamodels/models.ts" copy
export interface ButtonClickEvent {
    eventId    Key<string>
    timestamp  DateTime
    session_id String
    user_agent String
    locale     String
    location   String
    href       String
    pathname   String
    referrer   String
    cta_copy   String // Text on the button clicked
    cta_target String // Target link redirected by the button
}

```

Try adding a new data model to your `models.ts` file located in your `/datamodels` folder. Make sure your Moose development server is running. When you save your changes, Moose will create a new API endpoint to ingest data for your newly defined data model, a streaming topic to buffer the data, and a table in Clickhouse to store the data. You can later query or build views on top of this for your analysis. If your dev server is running, you can validate that Moose configured all the infrastructure for you by opening a new terminal window and running.

```bash filename="terminal" copy
npx moose-cli ls
```

## Sending Custom Events

If your custom event is being instrumented from the client side of your web app, you can leverage the `script.js` that is already integrated into your application.

#### Example: Tracking Button Click Events

Add the following code to the `onClick()` event handler for the button you want to track:

```tsx filename="Your Web App Client Code" copy
window.MooseAnalytics.trackEvent("ButtonClickEvent", {
  cta_copy: button_text, // Dynamically capture the button text
  cta_target: target_href, // Capture the target URL
});
```

### Key Points

- The first argument to `trackEvent()` corresponds to the data model name, ensuring the right model is used for transmitting your data to Moose.
- The second argument is an object that includes the properties unique to the `ButtonClickEvent`, as specified in your data model.
- The integrated script enriches the event data with common web analytics properties defined in the `PageViewRaw` model. This means you do not need to manually set these properties, as they are automatically appended to your event data payload in the tracking script.
