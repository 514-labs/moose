# Typescript Interfaces as Data models

Moose enables you to model your data using Typescript interfaces. This is a powerful feature that allows you to define your data models in a single place and use them throughout your application.

## A basic data model

```typescript filename="userEvent.m.ts"
import { Key } from "moose-utils";

export interface UserActivityEvent {
  id: string & Key;
  userId: string;
  type: "login" | "logout";
  timestamp: Date;
}
```

There are a few things to note here:

- We are using the `Key` type from `moose-utils` to define the `id` field. This is a special type that is used to define primary keys in Moose.
- We are using the `&` operator to define the `id` field as a string and a `Key`. This is feature enables you to tell moose the specific type of your key.

## Enum support

Moose supports enums as well. You can use enums in your data models and Moose will handle them correctly.

```typescript filename="userEvent.m.ts"
import { Key } from "moose-utils";

export enum UserActivityEventType {
  Login = "login",
  Logout = "logout",
}

export interface UserActivityEvent {
  id: string & Key;
  userId: string;
  type: UserActivityEventType;
  timestamp: Date;
}
```

## Extending data models

You can extend data models as well. This is useful when you have a base data model that you want to extend with additional fields.

```typescript filename="userEvent.m.ts"
import { Key } from "moose-utils";

export enum UserActivityEventType {
  Login = "login",
  Logout = "logout",
}

export interface UserActivityEvent {
  id: string & Key;
  userId: string;
  type: UserActivityEventType;
  timestamp: Date;
}

export interface UserLoginEvent extends UserActivityEvent {
  ipAddress: string;
}
```

## Relations

Moose supports relations between data models. You can define relations between data models and Moose will handle them correctly.

```typescript filename="userEvent.m.ts"
import { Key } from "moose-utils";

export enum UserActivityEventType {
  AddtoCart = "addtocart",
  Checkout = "checkout",
}

interface PurchasedProduct {
  productId: string & Key;
  quantity: number;
  price: number;
  style: string;
}

export interface UserActivityEvent {
  id: string & Key;
  userId: string;
  type: UserActivityEventType;
  timestamp: Date;
}

export interface UserCartEvent extends UserActivityEvent {
  cartId: string;
  product: PurchasedProduct;
}
```

This will automatically create a relation between `UserCartEvent` and `PurchasedProduct` as well as the associated foreign keys between the two data models. In order to defined the relation, you need to have a `Key` assigned to a field in both the parent and the child data models.

## Limitations

- Moose does not support circular references between data models. This is a limitation of the underlying database and not Moose itself.
- Moose does not support relations between data models that are in different files. We are working on a solution for this and will update the documentation once it is available.
- Moose doesn't support every every type that is available in Typescript. We are working on adding support for more types and will update the documentation once it is available.
- We currently map your interface type to a sane default type in the database. We are working on adding support for custom type mapping.
