import { Callout, FileTree } from "nextra/components";

# Introduction

Data processing is the core of any data intensive application. Moose provides a simple and powerful way to process data using Streaming Functions. Streaming Functions are regular Typescript or Python functions that define how to process data from a source Data Model into a target Data Model. Moose automatically executes these functions to incoming data as it hits the streaming topic associated with the source Data Model.

Some common use cases for streaming functions include:

- **Data Transformation**: Transforming data from one format to another.
- **Data Enrichment**: Adding additional information to the data.
- **Data Filtering**: Filtering out unwanted data.
- **Triggering Other Tasks**: Triggering other tasks based on the data.

---

## File Structure

All streaming functions are stored in the `/functions` directory of your Moose app. Each streaming function is a TypeScript (`.ts`) file that defines how data is transformed from the source data model to the destination data model. The file name should be in the format `SourceDataModel__DestinationDataModel.ts`.

<FileTree>
  <FileTree.Folder name="my-moose-app" defaultOpen>
    <FileTree.Folder name="functions" defaultOpen>
      <FileTree.File name="SourceDataModel__DestinationDataModel.ts" />
    </FileTree.Folder>
  </FileTree.Folder>
</FileTree>

<Callout>
  Moose uses this structural convention to automatically identify and execute
  the Streaming Functions you create. Make sure you use two underscores to
  separate the source and destination data models in the file name.
</Callout>

## Orchestration

Moose orchestrates the execution of the streaming functions based on the source Data Model. When data is ingested into the source Data Model, Moose automatically triggers the corresponding Streaming Function to process the data.

---

## Function Definition

The function definition should have the following structure:

```ts filename="/functions/SourceDataModel__DestinationDataModel.ts" copy
export default function functionName(
  source: SourceDataModel,
): DestinationDataModel[] | DestinationDataModel | null {
  // Transformation logic
}
```

Notice that the function takes the source Data Model as an argument and can return an either:

- An array of target Data Models
- A single target Data Model
- `null`

The return type of the function dictates the streaming topic where the data returned by the function will be published. If the function returns 'null', the data will not be published to any streaming topic.

### Default Export

The main function should be the default export of the file. This is important because Moose uses the default export to identify the entry point into the Streaming Function.

### Function Body

The function body should contain whatever logic is necessary to process the data from the source Data Model. Within the function, you can leverage the full power of TypeScript or Python to manipulate the data as needed. Here are some common operations you might perform within a streaming function:

- Call a third-party API to enrich the data
- Perform a complex transformation on the data
- Filter out unwanted data
- Utilize a library to perform a specific operation on the data
