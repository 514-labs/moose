---
title: Runtime
description: The execution environment that runs your Moose application and manages all infrastructure
---

import { TypeScript, Python, LanguageSwitcher, CTACards, CTACard, Callout } from "@/components";
import { Cards, Card } from "nextra/components";

# Runtime

<LanguageSwitcher />

The Moose Runtime is the execution environment that runs your analytical backend application. When you run `moose dev` or `moose prod`, the runtime starts up and automatically manages all the infrastructure your application needs - databases, streaming, API servers, and workflows. It also manages the processes (Node.js, Python) to run your server functions: streaming functions, query API route handlers, and workflow tasks.

## Core Components

**Infrastructure Map**
- Stores the state of all your application components (tables, streams, views, APIs, functions, workflows)
- Used as the source of truth when diffing code changes against the state of the infrastructure
- Provides versioning and rollback capabilities

**Web Server**
- Main API server for data ingestion and queries (port 4000)
- Management server for administrative operations (port 5001)

**<Python inline>Python</Python><TypeScript inline>Node.js</TypeScript> Runtime**


Managed processes for running all variants of server functions defined in your application code:
- Streaming functions
- Query API route handlers
- Workflow tasks


**Data Sync**
- Automatically moves data between streaming and OLAP systems


## Managed Infrastructure

The runtime automatically provisions and manages these components based on what your application uses:

- **ClickHouse (`olap`)**: Columnar database for fast analytical queries
- **Redpanda (`streaming`)**: Kafka-compatible streaming platform for real-time data
- **Temporal (`workflows`)**: Workflow engine for data orchestration
- **Redis**: State coordination and caching (always required)

### Configuration

You can configure which features you want to use in your project configuration. Only the features you enable will be started by the runtime:

```toml copy
[features]
olap = true 
streaming = true
workflows = true
```

## Development vs Production

In **development mode**, the runtime manages everything locally using Docker containers. In **production mode**, you provide external infrastructure and the runtime connects to it.

<CTACards>
  <CTACard 
    title="Development Mode"
    description="Local environment with hot reload, automatic Docker management, and debugging tools for rapid iteration."
    ctaLink="/stack/runtime/dev"
    ctaLabel="Learn Development Mode"
    badge={{
      variant: "moose",
      text: "Local Dev",
    }}
  />
  
  <CTACard 
    title="Production Mode" 
    description="Hardened runtime optimized for performance, reliability, and horizontal scaling in production environments."
    ctaLink="/stack/runtime/prod"
    ctaLabel="Learn Production Mode"
    badge={{
      variant: "moose",
      text: "Production",
    }}
  />
</CTACards>

## Quick Start

<TypeScript>
```bash
# Start development environment (manages all infrastructure locally)
moose dev

# Build for production deployment
moose build

# Run in production mode (connects to external infrastructure)
moose prod
```
</TypeScript>

<Python>
```bash
# Start development environment (manages all infrastructure locally)
moose dev

# Build for production deployment
moose build

# Run in production mode (connects to external infrastructure)
moose prod
```
</Python>

## Common Workflows

**Starting a new project:**
1. Define your data models
2. Run `moose dev` - runtime creates tables and APIs automatically
3. Send data to your endpoints and query immediately

**Making changes:**
1. Update your code (add fields, create new models, etc.)
2. Runtime detects changes and updates infrastructure automatically
3. No restarts or manual migrations needed

**Going to production:**
1. Run `moose build` to create production artifacts
2. Deploy infrastructure externally (or use `--start-include-dependencies`)
3. Run `moose prod` to connect runtime to production infrastructure
