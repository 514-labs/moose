{"version":3,"file":"barAggregated.js","sourceRoot":"","sources":["../../app/views/barAggregated.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,gDAAuC;AAEvC,gDAA2D;AAC3D,2CAA+C;AAQ/C,IAAM,QAAQ,GAAG,oBAAW,CAAC,KAAM,CAAC;AACpC,IAAM,UAAU,GAAG,QAAQ,CAAC,OAAO,CAAC;AACvB,QAAA,eAAe,GAAG,IAAI,4BAAgB,CAAgB;IAC/D,SAAS,EAAE,eAAe;IAC1B,oBAAoB,EAAE,kBAAkB;IACxC,aAAa,EAAE,CAAC,YAAY,CAAC;IAC7B,eAAe,MAAE,eAAG,iTAAC,2BACN,EAAuB,8BAC9B,EAAqB,+BACnB,EAAkB,8BACtB,EAAqB,iCACrB,EAAqB,6BACtB,EAAQ,6CAEd,KAPgB,UAAU,CAAC,YAAY,EAC9B,UAAU,CAAC,UAAU,EACnB,UAAU,CAAC,OAAO,EACtB,UAAU,CAAC,UAAU,EACrB,UAAU,CAAC,UAAU,EACtB,QAAQ,CAEd;IACC,YAAY,EAAE,CAAC,QAAQ,CAAC;CAC3B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAEK,IAAI,CAAC,KAAK,CAAC,utBAAutB,CAAQ,CAAC,CAAC","sourcesContent":["import ____moose____typia from \"typia\";\nimport typia from \"typia\";\nimport { MaterializedView, sql } from \"@514labs/moose-lib\";\nimport { BarPipeline } from \"../ingest/models\";\ninterface BarAggregated {\n    dayOfMonth: number & typia.tags.Type<\"int64\">;\n    totalRows: number & typia.tags.Type<\"int64\">;\n    rowsWithText: number & typia.tags.Type<\"int64\">;\n    totalTextLength: number & typia.tags.Type<\"int64\">;\n    maxTextLength: number & typia.tags.Type<\"int64\">;\n}\nconst barTable = BarPipeline.table!;\nconst barColumns = barTable.columns;\nexport const BarAggregatedMV = new MaterializedView<BarAggregated>({\n    tableName: \"BarAggregated\",\n    materializedViewName: \"BarAggregated_MV\",\n    orderByFields: [\"dayOfMonth\"],\n    selectStatement: sql `SELECT\n    toDayOfMonth(${barColumns.utcTimestamp}) as dayOfMonth,\n    count(${barColumns.primaryKey}) as totalRows,\n    countIf(${barColumns.hasText}) as rowsWithText,\n    sum(${barColumns.textLength}) as totalTextLength,\n    max(${barColumns.textLength}) as maxTextLength\n  FROM ${barTable}\n  GROUP BY toDayOfMonth(utcTimestamp)\n  `,\n    selectTables: [barTable],\n}, ____moose____typia.json.schemas<[\n    BarAggregated\n]>(), JSON.parse(\"[{\\\"name\\\":\\\"dayOfMonth\\\",\\\"data_type\\\":\\\"Int64\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"totalRows\\\",\\\"data_type\\\":\\\"Int64\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"rowsWithText\\\",\\\"data_type\\\":\\\"Int64\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"totalTextLength\\\",\\\"data_type\\\":\\\"Int64\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"maxTextLength\\\",\\\"data_type\\\":\\\"Int64\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]}]\") as any);\n"]}