import { ZoomImg, Callout } from "@/components";
import { ArrowDownToLine, Database, Workflow, Layers, BarChart } from "lucide-react";

# Moose Architecture

<ZoomImg light="/overview-arch-light.png" dark="/overview-arch-dark.png" alt="Moose Development Environment" />

## Moose Primitives & Infrastructure Side Effects

Moose organizes your data pipeline into five distinct infrastructure primitives:
| Component | What You Write | What Moose Generates |
|-----------|---------------|---------------------|
| [OlapTables](/moose/building/olap-table) | TS interfaces or Pydantic models | ClickHouse table |
| [Ingest APIs](/moose/building/ingestion) | TS interfaces or Pydantic models | HTTP `POST` endpoints |
| [Streams](/moose/building/streams) | Stream processors in TS/Python | Redpanda streaming topic |
| [Views](/moose/building/materialized-views) | SQL blocks or TS/Python functions | ClickHouse materialized view |
| [Consumption APIs](/moose/building/consumption-apis) | Type-safe query definitions | HTTP `GET` endpoints |
| [Workflows](/moose/building/workflows) | Workflow definitions in TS/Python | Scheduled or triggered jobs |

## Customizing Your Infrastructure

Moose is designed to be highly customizable. You can control which modules are included in your deployment using `moose.config.toml`:

### Default Configuration
```toml filename="moose.config.toml"
[features]
streaming_engine = true  # Include Redpanda for streaming
workflows = true        # Enable Temporal for orchestration
```
<Callout type="warning">
By default, both `streaming_engine` and `workflows` are enabled. You must set the respective features to `false` to disable them.
</Callout>

### Disabling Streaming
```toml filename="moose.config.toml"
[features]
streaming_engine = false  # Disable Redpanda for streaming
```

### Disabling Orchestration
```toml filename="moose.config.toml"
[features]
workflows = false        # Disable Temporal for orchestration
```

## Development Environment Details

| Component | Purpose | Access |
|-----------|---------|--------|
| Web Server | Handles HTTP requests for data ingestion and APIs | localhost:4000 |
| ClickHouse | Analytical database for data storage and querying | localhost:18123 |
| Redpanda | Kafka-compatible message broker for streaming | localhost:19092 |
| Temporal | Workflow orchestration engine | localhost:7233 (Server) / localhost:8080 (UI) |
| Redis | Caching and temporary storage | Internal only |

All these components are automatically configured to work together, creating a complete development environment that mirrors a production deployment.
