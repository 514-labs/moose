---
title: Trigger APIs
description: Create APIs that trigger workflows and other processes
---

import { FileTree } from "nextra/components";
import { Python, TypeScript, Callout, LanguageSwitcher, BulletPointsCard } from "@/components";

# Trigger APIs

<LanguageSwitcher />

## Overview

Trigger APIs are specialized Consumption APIs that initiate workflows, data processing jobs, or other automated processes. They provide a programmatic interface for starting complex operations and returning immediate status information.

Common use cases include:
- Starting data processing workflows
- Triggering batch jobs
- Initiating ETL pipelines
- Launching scheduled tasks on-demand

<BulletPointsCard
  bulletStyle="check"
  divider={false}
  title="Trigger APIs provide:"
  bullets={[
    "Immediate response with execution status",
    "Input validation and type safety",
    "Workflow execution tracking",
    "Integration with external systems"
  ]}
/>

## Basic Trigger API Structure

<TypeScript>
```typescript filename="app/apis/trigger_workflow.ts" copy
import { ConsumptionAPI } from "@514labs/moose-lib";

interface WorkflowParams {
  inputValue: string;
  priority?: string;
}

interface WorkflowResponse {
  workflowId: string;
  status: string;
}

const triggerApi = new ConsumptionAPI<WorkflowParams, WorkflowResponse>(
  "trigger-workflow",
  async ({ inputValue, priority = "normal" }: WorkflowParams, { client }) => {
    // Trigger the workflow with input parameters
    const workflowExecution = await client.workflows.execute({
      workflow: "data-processing",
      params: { 
        inputValue,
        priority,
        triggeredAt: new Date().toISOString()
      }
    });

    return {
      workflowId: workflowExecution.id,
      status: "started"
    };
  }
);

export default triggerApi;
```
</TypeScript>

<Python>
```python filename="app/apis/trigger_workflow.py" copy
from moose_lib import MooseClient, ConsumptionAPI
from pydantic import BaseModel, Field
from datetime import datetime

class WorkflowParams(BaseModel):
    input_value: str
    priority: str = Field(default="normal")

class WorkflowResponse(BaseModel):
    workflow_id: str
    status: str

def run(params: WorkflowParams, client: MooseClient) -> WorkflowResponse:
    # Trigger the workflow with input parameters
    workflow_execution = client.workflows.execute(
        workflow="data-processing",
        params={
            "input_value": params.input_value,
            "priority": params.priority,
            "triggered_at": datetime.now().isoformat()
        }
    )

    return WorkflowResponse(
        workflow_id=workflow_execution.id,
        status="started"
    )

api = ConsumptionAPI[WorkflowParams, WorkflowResponse]("trigger-workflow", run)
```
</Python>

## Using the Trigger API

Once deployed, you can trigger workflows via HTTP requests:

```bash filename="Terminal" copy
curl -X POST http://localhost:4000/consumption/trigger-workflow \
  -H "Content-Type: application/json" \
  -d '{
    "inputValue": "process-user-data",
    "priority": "high"
  }'
```

Response:
```json
{
  "workflowId": "workflow-12345",
  "status": "started"
}
```
