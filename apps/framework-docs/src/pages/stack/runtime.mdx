---
title: Runtime
description: The execution environment that runs your Moose application and manages all infrastructure
---

import { TypeScript, Python, LanguageSwitcher, CTACards, CTACard, Callout } from "@/components";
import { Cards, Card } from "nextra/components";

# Runtime

<LanguageSwitcher />

The Moose Runtime is the execution environment that runs your analytical backend application. The runtime has two modes: `moose dev` and `moose prod`.

- `moose dev` is designed for learning and prototyping quickly, and provisions all infrastructure locally
- `moose prod` is designed for production deployments, and requires that you have the underlying infrastructure services (Redis, ClickHouse, Redpanda, Temporal) already running somewhere else


In both modes, the runtime automatically applies what you have defined in your code to the infrastructure (databases, streaming, API servers, and workflows). 

- In development, this happens in real-time as you save your code. 
- In production, this happens once at startup.


## Runtime Architecture

**Infrastructure Map**
- Stores the state of all your application components (tables, streams, views, APIs, functions, workflows)
- Used as the source of truth when diffing code changes against the state of the infrastructure
- Provides versioning and rollback capabilities

**Web Server**
- Main API server for all routes defined in your application code (port 4000)
- Manages the processes for all `IngestApi` defined in your application code
- Management server for administrative operations (port 5001)

**<Python inline>Python</Python><TypeScript inline>Node.js</TypeScript> Runtime** for all server functions defined in your application code, including:
- Streaming functions
- API route handlers
- Workflow tasks

**Kafka to ClickHouse Data Sync**
- Rust-process that syncs data between streaming topics and OLAP tables

## Managed Infrastructure

The runtime automatically provisions (`dev` mode only) and manages these components based on what your application uses:

- **ClickHouse (`olap`)**: Columnar database for fast analytical queries
- **Redpanda (`streaming_engine`)**: Kafka-compatible streaming platform for real-time data
- **Temporal (`workflows`)**: Workflow engine for data orchestration
- **Redis**: State coordination and caching (always required)

### Configuration

You can configure which features you want to use in your project configuration. Only the features you enable will be started by the runtime:

```toml copy
[features]
olap = true 
streaming_engine = true
workflows = true
```

## Development vs Production

The Moose runtime behaves differently in development and production environments:

### Development (`moose dev`)

**What it does:**
- Runs everything locally using Docker containers, no configuration needed
- Automatically starts ClickHouse, Redpanda, Temporal, and Redis
- Watches your code for changes and hot-reloads on save
- Handles all container setup and networking
- Designed for learning and prototyping quickly

**How it works:**
1. Reads your `moose.config.toml` to determine which services to start
2. Spins up Docker containers for each enabled feature
3. Monitors your `app/` directory for file changes
4. Automatically rebuilds and redeploys when you save files

### Production (`moose prod`)

Unlike `moose dev`, `moose prod` requires that you have the underlying infrastructure services (Redis, ClickHouse, Redpanda, Temporal) already running somewhere else.

**What it does:**
- Connects to your existing external infrastructure
- Compares your code with running services
- Applies schema changes on startup
- No hot-reloading or file watching

**How it works:**
1. Connects to external services using your environment variables
2. Compares your current code with the running infrastructure
3. Applies any necessary schema changes (new tables, columns, etc.)
4. Starts your application with production settings


<Callout type="info" title="Read the Self-Hosting Guide">
For detailed production deployment instructions including containerization, Kubernetes deployment, cloud configuration, and monitoring setup, see the [Self-Hosting Deployment Guide](/moose/deploying/self-hosting).
</Callout>
