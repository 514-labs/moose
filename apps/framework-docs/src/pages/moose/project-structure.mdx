import { FileTree } from "nextra/components";
import { LanguageSwitcher } from "@/components";

# Project Structure

<LanguageSwitcher />

Moose provides a flexible yet opinionated project structure that helps you build reliable data applications quickly. The key principle is that **only objects exported from your root `index.ts` file are mapped to infrastructure**, giving you freedom in how you organize your implementation details.

## Core Concept: Infrastructure Mapping

The most important file in your project is the root `index.ts` (or `index.py`). This file acts as the single source of truth for what gets deployed to your infrastructure:

<TypeScript>
```typescript
// app/index.ts
export { StarEventModel } from './datamodels/github';
export { ProcessStarsFunction } from './functions/process-stars';
export { StarAnalyticsAPI } from './apis/analytics';
```
</TypeScript>

<Python>
```python
# app/index.py
from app.datamodels.github import StarEventModel
from app.functions.process_stars import ProcessStarsFunction
from app.apis.analytics import StarAnalyticsAPI

__all__ = ['StarEventModel', 'ProcessStarsFunction', 'StarAnalyticsAPI']
```
</Python>

## Project Structure

While you have flexibility in organizing your implementation, Moose provides a conventional structure that promotes maintainability:

<TypeScript>
<FileTree>
  <FileTree.Folder name=".moose" />
  <FileTree.Folder name="app" defaultOpen>
    <FileTree.File name="index.ts" />
    <FileTree.Folder name="datamodels" defaultOpen>
      <FileTree.File name="github.ts" />
      <FileTree.File name="analytics.ts" />
    </FileTree.Folder>
    <FileTree.Folder name="functions" defaultOpen>
      <FileTree.File name="process-stars.ts" />
    </FileTree.Folder>
    <FileTree.Folder name="blocks" defaultOpen>
      <FileTree.File name="aggregations.ts" />
    </FileTree.Folder>
    <FileTree.Folder name="apis" defaultOpen>
      <FileTree.File name="analytics.ts" />
    </FileTree.Folder>
    <FileTree.Folder name="scripts" defaultOpen>
      <FileTree.Folder name="StarAnalysis" defaultOpen>
        <FileTree.File name="1.collect.ts" />
        <FileTree.File name="2.analyze.ts" />
        <FileTree.File name="config.toml" />
      </FileTree.Folder>
    </FileTree.Folder>
  </FileTree.Folder>
  <FileTree.File name="package.json" />
  <FileTree.File name="moose.config.toml" />
</FileTree>
</TypeScript>

<Python>
<FileTree>
  <FileTree.Folder name=".moose" />
  <FileTree.Folder name="app" defaultOpen>
    <FileTree.File name="index.py" />
    <FileTree.Folder name="datamodels" defaultOpen>
      <FileTree.File name="github.py" />
      <FileTree.File name="analytics.py" />
    </FileTree.Folder>
    <FileTree.Folder name="functions" defaultOpen>
      <FileTree.File name="process_stars.py" />
    </FileTree.Folder>
    <FileTree.Folder name="blocks" defaultOpen>
      <FileTree.File name="aggregations.py" />
    </FileTree.Folder>
    <FileTree.Folder name="apis" defaultOpen>
      <FileTree.File name="analytics.py" />
    </FileTree.Folder>
    <FileTree.Folder name="scripts" defaultOpen>
      <FileTree.Folder name="star_analysis" defaultOpen>
        <FileTree.File name="1_collect.py" />
        <FileTree.File name="2_analyze.py" />
        <FileTree.File name="config.toml" />
      </FileTree.Folder>
    </FileTree.Folder>
  </FileTree.Folder>
  <FileTree.File name="moose.config.toml" />
</FileTree>
</Python>

## Directory Purposes

|            |                                                                                               |
| ---------- | --------------------------------------------------------------------------------------------- |
| app/index.ts | The critical file that exports all resources to be mapped to infrastructure |
| datamodels | Define your [Data Models](../data-models) for event ingestion and storage |
| functions  | Implement [Streaming Functions](../stream-processing) for real-time data processing |
| blocks     | Create [Blocks](../db-processing) for data transformations and aggregations |
| apis       | Build [Consumption APIs](../consumption-apis) to expose your data |
| scripts    | Define batch [Workflows](../workflows) for scheduled or on-demand processing |

## Key Benefits

- **Clear Infrastructure Boundaries**: Only exports from `index.ts` affect your deployed infrastructure
- **Flexible Implementation**: Organize internal code however best suits your team
- **Convention over Configuration**: Standard directory structure for common Moose components
- **Maintainable Code**: Logical separation of concerns with clear responsibilities

## Project Files

|                   |                                                                                                      |
| ----------------- | ---------------------------------------------------------------------------------------------------- |
| moose.config.toml | Core configuration for your Moose application |
| .moose            | Generated artifacts and documentation |
| package.json      | (TypeScript) Dependencies and project metadata |

Remember: While this structure is recommended, you're free to organize your implementation details within each directory as needed. The only strict requirement is properly exporting your resources from the root `index` file.